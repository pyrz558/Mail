<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Airswords v44 - God Mode</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        :root { --neon: #00d2ff; --bg: #050505; --card: #111; --border: #222; }
        body { font-family: 'Consolas', monospace; background: var(--bg); color: #fff; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        .sidebar { width: 360px; background: #000; border-right: 1px solid var(--border); padding: 20px; display: flex; flex-direction: column; overflow-y: auto; }
        .acc-list { flex: 1; margin-top: 15px; }
        .acc-card { background: var(--card); border: 1px solid var(--border); padding: 15px; border-radius: 10px; margin-bottom: 10px; cursor: pointer; transition: 0.3s; }
        .acc-card.active { border-color: var(--neon); box-shadow: 0 0 10px rgba(0, 210, 255, 0.2); }

        .main { flex: 1; padding: 25px; display: flex; flex-direction: column; background: radial-gradient(circle at top right, #101520, #050505); overflow: hidden; }
        .info-header { background: #000; padding: 20px; border-radius: 15px; border: 1px solid #333; margin-bottom: 20px; }
        
        /* GHOST CARD */
        .vcc-display { background: linear-gradient(135deg, #1a1a1a, #000); border: 1px dashed var(--neon); padding: 15px; border-radius: 12px; margin: 15px 0; }
        .vcc-num { font-size: 20px; color: var(--neon); letter-spacing: 2px; }
        
        .action-btn { background: #1a1a1a; border: 1px solid var(--neon); color: var(--neon); padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; font-size: 13px; }
        .action-btn:hover { background: var(--neon); color: #000; }

        /* OVERLAYS */
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; flex-direction: column; }
        #mailReadOverlay { background: #fff; color: #000; }
        #sendOverlay, #importOverlay, #qrOverlay { background: rgba(0,0,0,0.95); justify-content: center; align-items: center; }
        
        .nav-bar { background: #111; color: #fff; padding: 15px; display: flex; align-items: center; border-bottom: 1px solid var(--neon); }
        .back-btn { background: var(--neon); color: #000; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-right: 20px; font-weight: bold; }

        /* FORMS */
        .form-box { max-width: 500px; width: 90%; background: #111; padding: 30px; border-radius: 15px; border: 1px solid var(--neon); display: flex; flex-direction: column; gap: 10px; }
        input, textarea { background: #000; border: 1px solid #333; color: #fff; padding: 15px; border-radius: 8px; }
        
        .feed { flex: 1; background: rgba(0,0,0,0.4); border-radius: 15px; border: 1px solid var(--border); padding: 20px; overflow-y: auto; }
        .msg-item { background: #111; padding: 15px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--neon); cursor: pointer; }
    </style>
</head>
<body>

<div id="mailReadOverlay" class="overlay">
    <div class="nav-bar"><button class="back-btn" onclick="closeOverlay('mailReadOverlay')">â¬… GERÄ°</button><b id="readSubject">Mesaj</b></div>
    <div id="mailContent" style="padding: 30px; overflow: auto; flex: 1;"></div>
</div>

<div id="sendOverlay" class="overlay">
    <div class="form-box">
        <h3 style="color:var(--neon); text-align:center">MAÄ°L GÃ–NDER</h3>
        <input type="email" id="toEmail" placeholder="AlÄ±cÄ±">
        <input type="text" id="subEmail" placeholder="Konu">
        <textarea id="bodyEmail" rows="5" placeholder="Mesaj..."></textarea>
        <button class="action-btn" onclick="sendMailAction()">ðŸš€ GÃ–NDER</button>
        <button class="action-btn" style="border-color:red; color:red" onclick="closeOverlay('sendOverlay')">Ä°PTAL</button>
    </div>
</div>

<div id="importOverlay" class="overlay">
    <div class="form-box" id="impStep1">
        <h3 style="color:var(--neon); text-align:center">HESAP AKTAR</h3>
        <input type="text" id="impMail" placeholder="E-Posta">
        <input type="password" id="impPass" placeholder="Åžifre">
        <button class="action-btn" onclick="importOTP()">KOD Ä°STE</button>
        <button class="action-btn" style="border-color:red; color:red" onclick="closeOverlay('importOverlay')">VAZGEÃ‡</button>
    </div>
    <div class="form-box" id="impStep2" style="display:none">
        <h3 style="color:var(--neon); text-align:center">ONAY KODU</h3>
        <input type="text" id="impOTP" placeholder="Kodu Gir (0000)">
        <button class="action-btn" onclick="confirmImport()">AKTARMAYI BÄ°TÄ°R</button>
    </div>
</div>

<div id="qrOverlay" class="overlay">
    <div class="form-box">
        <h3 style="color:var(--neon); text-align:center">QR BYPASS</h3>
        <input type="file" id="qrFile" accept="image/*" onchange="decodeQR(this)">
        <div id="qrRes" style="font-size:10px; color:#777; margin:10px 0; word-break:break-all">GÃ¶rÃ¼ntÃ¼ yÃ¼kleyin...</div>
        <button class="action-btn" style="border-color:red; color:red" onclick="closeOverlay('qrOverlay')">KAPAT</button>
    </div>
</div>

<div class="sidebar">
    <h2 style="color: var(--neon); text-align: center;">AIRSWORDS v44</h2>
    <button class="action-btn" style="background:var(--neon); color:#000; font-size:16px;" onclick="forgeIdentity()">âš¡ YENÄ° KÄ°MLÄ°K FORGE ET</button>
    <button class="action-btn" style="border-color:#ffaa00; color:#ffaa00" onclick="openOverlay('qrOverlay')">ðŸ“¸ QR BYPASS</button>
    <button class="action-btn" style="border-color:#555; color:#555" onclick="openOverlay('importOverlay')">+ BAÅžKA MAÄ°L EKLE</button>
    <div class="acc-list" id="accList"></div>
</div>

<div class="main">
    <div id="interface" style="display: none;">
        <div class="info-header">
            <h2 id="dispMail" style="margin:0; color:var(--neon)"></h2>
            <div class="vcc-display">
                <small style="color:#777">GHOST CARD (ABONELÄ°K Ä°Ã‡Ä°N)</small>
                <div id="vccNum" class="vcc-num">#### #### #### ####</div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 14px;">
                    <span id="vccExp">SKT: --/--</span>
                    <span id="vccCvv">CVV: ---</span>
                </div>
            </div>
            <div style="background: #0d1b2a; padding: 12px; border-radius: 8px; margin-bottom:10px; border: 1px solid #1b263b;">
                <span style="color: #555; font-size: 11px;">HESAP ÅžÄ°FRESÄ°:</span><br>
                <b id="dispPass" style="color: #00d2ff; font-family: monospace; font-size: 18px;"></b>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <button class="action-btn" onclick="syncMail()">ðŸ“¬ YENÄ°LE</button>
                <button class="action-btn" style="border-color:#ff0055; color:#ff0055" onclick="openOverlay('sendOverlay')">ðŸ“§ MAÄ°L GÃ–NDER</button>
            </div>
        </div>
        <div class="feed" id="mainFeed"></div>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('airswords_v44')) || [];
    let active = -1;
    const API = "https://api.mail.tm";

    // --- QR BYPASS ---
    function decodeQR(input) {
        const file = input.files[0];
        const resDiv = document.getElementById('qrRes');
        const scanner = new Html5Qrcode("qrRes");
        scanner.scanFile(file, true).then(text => {
            resDiv.innerHTML = `<b style="color:var(--neon)">LÄ°NK:</b> ${text}`;
            if(confirm("Linke gidilsin mi?")) window.open(text, '_blank');
        }).catch(e => resDiv.innerText = "QR bulunamadÄ±!");
    }

    // --- KART ÃœRETÄ°CÄ° ---
    function generateVCC() {
        const bins = ["450644", "541275", "483698", "522396"];
        let num = bins[Math.floor(Math.random()*bins.length)];
        while(num.length < 16) num += Math.floor(Math.random()*10);
        document.getElementById('vccNum').innerText = num.match(/.{1,4}/g).join(" ");
        document.getElementById('vccExp').innerText = "SKT: " + (Math.floor(Math.random()*11)+1).toString().padStart(2,'0') + "/2" + (Math.floor(Math.random()*5)+5);
        document.getElementById('vccCvv').innerText = "CVV: " + Math.floor(Math.random()*899+100);
    }

    // --- MAÄ°L AKTAR (IMPORT) ---
    async function importOTP() {
        const mail = document.getElementById('impMail').value;
        const pass = document.getElementById('impPass').value;
        const res = await fetch(`${API}/token`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({address: mail, password: pass}) });
        if(res.ok) {
            document.getElementById('impStep1').style.display='none';
            document.getElementById('impStep2').style.display='block';
            alert("Onay kodu mailine gitti! (SimÃ¼lasyon: 0000)");
        } else alert("HatalÄ± giriÅŸ!");
    }

    function confirmImport() {
        if(document.getElementById('impOTP').value === "0000") {
            db.unshift({ mail: document.getElementById('impMail').value, pass: document.getElementById('impPass').value });
            localStorage.setItem('airswords_v44', JSON.stringify(db));
            render(); closeOverlay('importOverlay');
        } else alert("Kod yanlÄ±ÅŸ!");
    }

    // --- MAÄ°L GÃ–NDERME ---
    async function sendMailAction() {
        const acc = db[active];
        const to = document.getElementById('toEmail').value;
        const sub = document.getElementById('subEmail').value || "(No Subject)";
        const body = document.getElementById('bodyEmail').value;
        try {
            const tRes = await fetch(`${API}/token`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({address: acc.mail, password: acc.pass}) });
            const tData = await tRes.json();
            const sRes = await fetch(`${API}/messages`, {
                method: 'POST',
                headers: {'Authorization': `Bearer ${tData.token}`, 'Content-Type': 'application/json'},
                body: JSON.stringify({ to: [to], subject: sub, text: body })
            });
            if(sRes.ok) { alert("ðŸš€ GÃ¶nderildi!"); closeOverlay('sendOverlay'); } else alert("Limit!");
        } catch(e) { alert("Hata!"); }
    }

    // --- ANA SÄ°STEM ---
    async function forgeIdentity() {
        const dRes = await fetch(`${API}/domains`);
        const dData = await dRes.json();
        const mail = Math.random().toString(36).substring(2, 10) + "@" + dData['hydra:member'][0].domain;
        const pass = "AS" + Math.random().toString(36).substring(2, 8).toUpperCase() + Math.floor(Math.random()*100);
        await fetch(`${API}/accounts`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({address: mail, password: pass}) });
        db.unshift({ mail, pass }); localStorage.setItem('airswords_v44', JSON.stringify(db)); render();
    }

    function render() {
        document.getElementById('accList').innerHTML = db.map((a, i) => `<div class="acc-card ${active === i ? 'active' : ''}" onclick="select(${i})"><b>${a.mail}</b></div>`).join("");
    }

    function select(i) {
        active = i;
        document.getElementById('interface').style.display = 'block';
        document.getElementById('dispMail').innerText = db[i].mail;
        document.getElementById('dispPass').innerText = db[i].pass;
        generateVCC(); render(); syncMail();
    }

    async function syncMail() {
        const acc = db[active];
        const feed = document.getElementById('mainFeed');
        feed.innerHTML = "ðŸ“¡ SorgulanÄ±yor...";
        try {
            const tRes = await fetch(`${API}/token`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({address: acc.mail, password: acc.pass}) });
            const tData = await tRes.json();
            const mRes = await fetch(`${API}/messages`, { headers: {'Authorization': `Bearer ${tData.token}`} });
            const mData = await mRes.json();
            feed.innerHTML = mData['hydra:member'].map(m => `<div class="msg-item" onclick="readMail('${m.id}', '${tData.token}')"><b>${m.from.address}</b><br>${m.subject}</div>`).join("") || "BoÅŸ.";
        } catch(e) { feed.innerHTML = "BaÄŸlantÄ± koptu!"; }
    }

    function readMail(id, token) {
        document.getElementById('mailReadOverlay').style.display = 'flex';
        fetch(`${API}/messages/${id}`, { headers: {'Authorization': `Bearer ${token}`} }).then(res => res.json()).then(data => {
            document.getElementById('readSubject').innerText = data.subject;
            document.getElementById('mailContent').innerHTML = data.html || data.text;
        });
    }

    function openOverlay(id) { document.getElementById(id).style.display = 'flex'; }
    function closeOverlay(id) { document.getElementById(id).style.display = 'none'; }
    window.onload = render;
</script>
</body>
</html>